{"version":3,"sources":["assets\\code\\cameraFollow.js"],"names":["player","cc","Class","Component","properties","following","ui","Node","startPos","xOffsetPlayer","maxOffset","startY","onLoad","update","dt","find","getComponent","myPlayer","playerId","m","movingRight","movingLeft","node","x","y"],"mappings":";;;;;;AAAA,IAAIA,MAAM,GAAG,IAAb;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRJ,IAAAA,MAAM,EAAE,IADA;AAERK,IAAAA,SAAS,EAAE,KAFH;AAGR;AACAC,IAAAA,EAAE,EAAEL,EAAE,CAACM,IAJC;AAKR;AACAC,IAAAA,QAAQ,EAAE,EANF;AAORC,IAAAA,aAAa,EAAE,CAPP;AAQRC,IAAAA,SAAS,EAAE,EARH;AASRC,IAAAA,MAAM,EAAE;AATA,GAHP;AAeL;AAEAC,EAAAA,MAjBK,oBAiBI;AACL,SAAKJ,QAAL,GAAgB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAhB;AACH,GAnBI;AAsBLK,EAAAA,MAtBK,kBAsBEC,EAtBF,EAsBM;AACP,QAAI,CAAC,KAAKT,SAAV,EAAqB;AACjB,UAAIJ,EAAE,CAACc,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCC,QAAzC,IAAqD,IAAzD,EAA+D;AAC3D,aAAKjB,MAAL,GAAcC,EAAE,CAACc,IAAH,CAAQ,oBAAoBd,EAAE,CAACc,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCE,QAArE,CAAd;AACA,aAAKb,SAAL,GAAiB,IAAjB;AACH;AACJ,KALD,MAKO;AACH,UAAIc,CAAC,GAAG,KAAKnB,MAAL,CAAYgB,YAAZ,CAAyB,UAAzB,CAAR;AACA,UAAGG,CAAC,CAACC,WAAF,IAAiB,KAAKX,aAAL,GAAqB,KAAKC,SAA9C,EACI,KAAKD,aAAL,IAAsB,KAAGK,EAAzB,CADJ,KAEK,IAAGK,CAAC,CAACE,UAAF,IAAgB,KAAKZ,aAAL,GAAqB,CAAC,KAAKC,SAA9C,EACD,KAAKD,aAAL,IAAsB,KAAGK,EAAzB,CADC,KAGD,KAAKL,aAAL,IAAoB,CAApB;AACJ,WAAKa,IAAL,CAAUC,CAAV,GAAc,KAAKvB,MAAL,CAAYuB,CAAZ,GAAgB,KAAKd,aAAnC;AACA,WAAKa,IAAL,CAAUE,CAAV,GAAc,KAAKb,MAAL,GAAc,CAAC,KAAKX,MAAL,CAAYwB,CAAZ,GAAc,KAAKb,MAApB,IAA4B,CAAxD;AACH,KAhBM,CAiBP;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH;AAlDI,CAAT","sourceRoot":"/","sourcesContent":["let player = null;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        player: null,\r\n        following: false,\r\n        // background: cc.Node,\r\n        ui: cc.Node,\r\n        // paralaxLayers: [cc.Node],\r\n        startPos: [],\r\n        xOffsetPlayer: 0,\r\n        maxOffset: 50,\r\n        startY: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.startPos = [0, 0, 0, 0, 0, 0, 0];\r\n    },\r\n\r\n\r\n    update(dt) {\r\n        if (!this.following) {\r\n            if (cc.find(\"system\").getComponent(\"client\").myPlayer != null) {\r\n                this.player = cc.find(\"Canvas/Players/\" + cc.find(\"system\").getComponent(\"client\").playerId);\r\n                this.following = true;\r\n            }\r\n        } else {\r\n            let m = this.player.getComponent(\"movement\")\r\n            if(m.movingRight && this.xOffsetPlayer < this.maxOffset)\r\n                this.xOffsetPlayer += 40*dt\r\n            else if(m.movingLeft && this.xOffsetPlayer > -this.maxOffset)\r\n                this.xOffsetPlayer -= 40*dt\r\n            else\r\n                this.xOffsetPlayer/=2\r\n            this.node.x = this.player.x + this.xOffsetPlayer;\r\n            this.node.y = this.startY + (this.player.y=this.startY)/2;\r\n        }\r\n        // for (let i = 0; i < this.paralaxLayers.length; i++) {\r\n        //     this.paralaxLayers[i].setPosition(this.node.x / (i + 1) * 2 + this.startPos[i], this.node.y / (i + 1) * 2);\r\n\r\n        //     if (Math.abs(this.node.x - this.paralaxLayers[i].x) >= (this.paralaxLayers[i].width - this.node.width)) {\r\n        //         //this.paralaxLayers[i].setPosition(this.node.x + (this.node.x - this.paralaxLayers[i].x), this.node.y);\r\n        //         this.startPos[i] += this.node.x - this.paralaxLayers[i].x;\r\n        //     }\r\n        // }\r\n        // this.background.setPosition(this.node.x, this.node.y);\r\n        // this.ui.x = this.node.x;\r\n        // this.ui.y = this.node.y;\r\n    },\r\n});\r\n"]}