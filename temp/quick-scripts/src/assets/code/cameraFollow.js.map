{"version":3,"sources":["assets\\code\\cameraFollow.js"],"names":["player","cc","Class","Component","properties","following","background","Node","ui","yOffset","paralaxLayers","startPos","xOffsetPlayer","yOffsetPlayer","onLoad","start","update","dt","find","getComponent","myPlayer","playerId","node","x","y","i","length","setPosition","Math","abs","width"],"mappings":";;;;;;AAAA,IAAIA,MAAM,GAAG,IAAb;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRJ,IAAAA,MAAM,EAAE,IADA;AAERK,IAAAA,SAAS,EAAE,KAFH;AAGRC,IAAAA,UAAU,EAAEL,EAAE,CAACM,IAHP;AAIRC,IAAAA,EAAE,EAAEP,EAAE,CAACM,IAJC;AAKRE,IAAAA,OAAO,EAAE,CALD;AAMRC,IAAAA,aAAa,EAAE,CAACT,EAAE,CAACM,IAAJ,CANP;AAORI,IAAAA,QAAQ,EAAE,EAPF;AAQRC,IAAAA,aAAa,EAAE,CARP;AASRC,IAAAA,aAAa,EAAE;AATP,GAHP;AAeL;AAEAC,EAAAA,MAjBK,oBAiBI;AACL,SAAKH,QAAL,GAAgB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAhB;AACH,GAnBI;AAsBLI,EAAAA,KAtBK,mBAsBG,CACP,CAvBI;AAyBLC,EAAAA,MAzBK,kBAyBEC,EAzBF,EAyBM;AACP,QAAI,CAAC,KAAKZ,SAAV,EAAqB;AACjB,UAAIJ,EAAE,CAACiB,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCC,QAAzC,IAAqD,IAAzD,EAA+D;AAC3D,aAAKpB,MAAL,GAAcC,EAAE,CAACiB,IAAH,CAAQ,oBAAoBjB,EAAE,CAACiB,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCE,QAArE,CAAd;AACA,aAAKhB,SAAL,GAAiB,IAAjB;AACH;AACJ,KALD,MAKO;AACH,WAAKiB,IAAL,CAAUC,CAAV,GAAc,KAAKvB,MAAL,CAAYuB,CAAZ,GAAgB,KAAKX,aAAnC;AACA,WAAKU,IAAL,CAAUE,CAAV,GAAc,KAAKxB,MAAL,CAAYwB,CAAZ,GAAgB,KAAKf,OAArB,GAA+B,KAAKI,aAAlD;AACH;;AACD,SAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKf,aAAL,CAAmBgB,MAAvC,EAA+CD,CAAC,EAAhD,EAAoD;AAChD,WAAKf,aAAL,CAAmBe,CAAnB,EAAsBE,WAAtB,CAAkC,KAAKL,IAAL,CAAUC,CAAV,IAAeE,CAAC,GAAG,CAAnB,IAAwB,CAAxB,GAA4B,KAAKd,QAAL,CAAcc,CAAd,CAA9D,EAAgF,KAAKH,IAAL,CAAUE,CAAV,IAAeC,CAAC,GAAG,CAAnB,IAAwB,CAAxG;;AAEA,UAAIG,IAAI,CAACC,GAAL,CAAS,KAAKP,IAAL,CAAUC,CAAV,GAAc,KAAKb,aAAL,CAAmBe,CAAnB,EAAsBF,CAA7C,KAAoD,KAAKb,aAAL,CAAmBe,CAAnB,EAAsBK,KAAtB,GAA8B,KAAKR,IAAL,CAAUQ,KAAhG,EAAwG;AACpG;AACA,aAAKnB,QAAL,CAAcc,CAAd,KAAoB,KAAKH,IAAL,CAAUC,CAAV,GAAc,KAAKb,aAAL,CAAmBe,CAAnB,EAAsBF,CAAxD;AACH;AACJ;;AACD,SAAKjB,UAAL,CAAgBqB,WAAhB,CAA4B,KAAKL,IAAL,CAAUC,CAAtC,EAAyC,KAAKD,IAAL,CAAUE,CAAnD;AACA,SAAKhB,EAAL,CAAQe,CAAR,GAAY,KAAKD,IAAL,CAAUC,CAAtB;AACA,SAAKf,EAAL,CAAQgB,CAAR,GAAY,KAAKF,IAAL,CAAUE,CAAtB;AACH;AA9CI,CAAT","sourceRoot":"/","sourcesContent":["let player = null;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        player: null,\r\n        following: false,\r\n        background: cc.Node,\r\n        ui: cc.Node,\r\n        yOffset: 0,\r\n        paralaxLayers: [cc.Node],\r\n        startPos: [],\r\n        xOffsetPlayer: 0,\r\n        yOffsetPlayer: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.startPos = [0, 0, 0, 0, 0, 0, 0];\r\n    },\r\n\r\n\r\n    start() {\r\n    },\r\n\r\n    update(dt) {\r\n        if (!this.following) {\r\n            if (cc.find(\"system\").getComponent(\"client\").myPlayer != null) {\r\n                this.player = cc.find(\"Canvas/Players/\" + cc.find(\"system\").getComponent(\"client\").playerId);\r\n                this.following = true;\r\n            }\r\n        } else {\r\n            this.node.x = this.player.x + this.xOffsetPlayer;\r\n            this.node.y = this.player.y + this.yOffset + this.yOffsetPlayer;\r\n        }\r\n        for (let i = 0; i < this.paralaxLayers.length; i++) {\r\n            this.paralaxLayers[i].setPosition(this.node.x / (i + 1) * 2 + this.startPos[i], this.node.y / (i + 1) * 2);\r\n\r\n            if (Math.abs(this.node.x - this.paralaxLayers[i].x) >= (this.paralaxLayers[i].width - this.node.width)) {\r\n                //this.paralaxLayers[i].setPosition(this.node.x + (this.node.x - this.paralaxLayers[i].x), this.node.y);\r\n                this.startPos[i] += this.node.x - this.paralaxLayers[i].x;\r\n            }\r\n        }\r\n        this.background.setPosition(this.node.x, this.node.y);\r\n        this.ui.x = this.node.x;\r\n        this.ui.y = this.node.y;\r\n    },\r\n});\r\n"]}