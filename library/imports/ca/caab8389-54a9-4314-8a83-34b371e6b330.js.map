{"version":3,"sources":["assets\\code\\movement.js"],"names":["cc","Class","Component","properties","jumpHeight","smallJumpHeight","jumpDuration","moveSpeed","smallMoveSpeed","isPlayer","clientScript","Node","xSpeed","ySpeed","localCenter","grounder","body","animation","Animation","deltaTime","fallMultiplier","growing","maxScale","minScale","ateCake","atePotion","grounded","movingRight","movingLeft","joystickMax","joystickVector","v2","joystickBall","leftButton","rightButton","jumpButton","potionButton","cakeButton","emojis","timeStep","startTimer","playingAnimation","joystickMoving","playedFalling","soundController","sounds","busy","total","sum","start","find","disable","sys","platform","WECHAT_GAME","off","EventType","TOUCH_START","moveLeft","moveRight","jump","shrink","grow","systemEvent","SystemEvent","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","node","getComponent","RigidBody","gravityScale","linearVelocity","Vec2","playEmoji","type","emoji","getChildByName","active","tween","to","position","x","Math","ceil","random","round","y","easing","delay","call","onBeginContact","contact","self","other","tag","group","moving","play","scheduleOnce","scaleY","onEndContact","jumpRunAction","jumpUp","by","jumpDown","sequence","scaleX","animState","wrapMode","WrapMode","Loop","sendPlayerState","stop","stopX","stopY","event","keyCode","macro","KEY","w","a","d","e","q","showEmojis","onLoad","Map","i","getComponents","AudioSource","length","clip","name","onDestroy","joystickStart","touchPos","getLocation","out","Camera","getScreenToWorldPoint","localTouchPos","parent","convertToNodeSpaceAR","limitJoystick","setJoystickBallPos","joystickMovePlayer","joystickMove","touch","getTouches","joystickEnd","ZERO","pos","setPosition","joystickVec","inputMag","mag","mulSelf","update","dt","getLocalCenter","gameStarted","playerId","abs","rb","on","yOffsetPlayer","xOffsetPlayer","director","getPhysicsManager","gravity"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    \r\n    properties: {\r\n        jumpHeight: 0,\r\n        smallJumpHeight: 0,\r\n        jumpDuration: 0,\r\n        moveSpeed: 0,\r\n        smallMoveSpeed: 0,\r\n        isPlayer: false,\r\n        clientScript: cc.Node,\r\n        xSpeed: 0,\r\n        ySpeed: 0,\r\n        localCenter: 0,\r\n        grounder: cc.Node,\r\n        body: cc.Node,\r\n        animation: cc.Animation,\r\n        deltaTime: 0,\r\n        fallMultiplier: 2.5,\r\n        growing: 0,\r\n        maxScale: 1,\r\n        minScale: 0.5,\r\n        ateCake: false,\r\n        atePotion: false,\r\n        grounded: false,\r\n        movingRight: false,\r\n        movingLeft: false,\r\n        joystickMax: 69,\r\n        joystickVector: cc.v2(),\r\n        joystickBall: cc.Node,\r\n        leftButton: cc.Node,\r\n        rightButton: cc.Node,\r\n        jumpButton: cc.Node,\r\n        potionButton: cc.Node,\r\n        cakeButton: cc.Node,\r\n        emojis: cc.Node,\r\n        timeStep: 0,\r\n        startTimer: false,\r\n        playingAnimation: true,\r\n        joystickMoving: false,\r\n        playedFalling: false,\r\n        soundController: cc.Node,\r\n        sounds: null,\r\n        busy: false,\r\n\r\n        total: 0,\r\n        sum: 0,\r\n    },\r\n\r\n    // disable() {\r\n    //     if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n    //         let joystick = cc.find(\"Canvas/UI/MOBILE/JOYSTICK\");\r\n    //         let jumpButton = cc.find(\"Canvas/UI/MOBILE/JUMP\");\r\n    //         let potionButton = cc.find(\"Canvas/UI/MOBILE/POTION\");\r\n    //         let cakeButton = cc.find(\"Canvas/UI/MOBILE/CAKE\");\r\n    //         joystick.off(cc.Node.EventType.TOUCH_START, this.joystickStart, this);\r\n    //         joystick.off(cc.Node.EventType.TOUCH_MOVE, this.joystickMove, this);\r\n    //         joystick.off(cc.Node.EventType.TOUCH_END, this.joystickEnd, this);\r\n    //         joystick.off(cc.Node.EventType.TOUCH_CANCEL, this.joystickEnd, this);\r\n    //         jumpButton.off(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n    //         potionButton.off(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n    //         cakeButton.off(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n    //     } else {\r\n    //         cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n    //         cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    //     }\r\n        \r\n    //     this.node.getComponent(cc.RigidBody).gravityScale = 0;\r\n    //     this.node.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(0, 0);\r\n        \r\n    // },\r\n    start()\r\n    {\r\n        this.leftButton = cc.find(\"Canvas/UI/MOBILE2/LEFT\");\r\n        this.rightButton = cc.find(\"Canvas/UI/MOBILE2/RIGHT\");\r\n        this.jumpButton = cc.find(\"Canvas/UI/MOBILE2/JUMP\");\r\n        this.potionButton = cc.find(\"Canvas/UI/MOBILE2/POTION\");\r\n        this.cakeButton = cc.find(\"Canvas/UI/MOBILE2/CAKE\");\r\n    },\r\n    disable() {\r\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n            this.leftButton.off(cc.Node.EventType.TOUCH_START, this.moveLeft, this);\r\n            this.rightButton.off(cc.Node.EventType.TOUCH_START, this.moveRight, this);\r\n            this.jumpButton.off(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n            this.potionButton.off(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n            this.cakeButton.off(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n        } else {\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        }\r\n        \r\n        this.node.getComponent(cc.RigidBody).gravityScale = 0;\r\n        this.node.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(0, 0);\r\n        \r\n    },\r\n    playEmoji(type) {\r\n        let emoji = this.emojis.getChildByName(type);\r\n        //no spam error\r\n        if (! emoji.active) {\r\n            emoji.active = true;\r\n            cc.tween(emoji).to(0.5, { position: cc.v2(this.node.x + Math.ceil(Math.random() * 1000) * (Math.round(Math.random()) ? 1 : -1), this.node.y + 2000) }, { easing: 'sineOutIn' }).start();\r\n            cc.tween(emoji).delay(1).to(0, { position: cc.v2(this.node.getChildByName(\"body\").getChildByName(\"head\").x, this.node.getChildByName(\"body\").getChildByName(\"head\").y) }).call(() => { emoji.active = false }).start();\r\n        }\r\n        \r\n        //this.schedule(function () { emoji.active = false }, 2);\r\n    },\r\n    onBeginContact(contact, self, other) {\r\n\r\n        if (self.tag == 2 && (other.node.group == \"environment\" || other.node.group == \"movingPlatform\")){\r\n\r\n            this.grounded = true;\r\n            //stop falling animation\r\n            //this.animation.stop(\"falling\");\r\n            //this.playedFalling = false;\r\n\r\n            //play  animations\r\n            if (this.moving) {\r\n                this.animation.play(\"walk\");\r\n            } else {\r\n                this.animation.play(\"land\");\r\n                if (this.isPlayer)\r\n                    this.sounds[\"landing\"].play();\r\n\r\n                this.scheduleOnce(function () {\r\n                    this.playingAnimation = false;\r\n                }, 0.3);\r\n                \r\n            }\r\n\r\n            //change speed if different size\r\n            if (this.node.scaleY < this.maxScale) {\r\n                if (this.movingRight)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n                else if (this.movingLeft)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n            } else {\r\n                if (this.movingRight)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.moveSpeed * this.deltaTime, this.ySpeed);\r\n                else if (this.movingLeft)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.moveSpeed * this.deltaTime, this.ySpeed);\r\n            }\r\n\r\n            \r\n        }\r\n            \r\n    },\r\n\r\n    onEndContact(contact, self, other) {\r\n        if (self.tag == 2)\r\n            this.grounded = false;\r\n    },\r\n    jumpRunAction() {\r\n        var jumpUp = cc.tween().by(1, { y: 300 }, { easing: 'sineOut' });\r\n        var jumpDown = cc.tween().by(1, { y: -300 }, { easing: 'sineIn' });\r\n        cc.tween(this.node).sequence(jumpUp, jumpDown).start();\r\n    },\r\n\r\n    moveRight() {\r\n   \r\n        this.movingLeft = false;\r\n        this.body.scaleX = -1;\r\n        if (!this.moving && this.grounded) {\r\n            let animState = this.animation.play(\"walk\");\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n            this.moving = true;\r\n        }\r\n        this.movingRight = true;\r\n        if (this.isPlayer) {\r\n            this.busy = false;\r\n            if (this.node.scaleY < this.maxScale)\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.smallMoveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            else\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.moveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            \r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"right\");\r\n        }\r\n    },\r\n    moveLeft() {\r\n   \r\n        this.movingRight = false;\r\n        this.body.scaleX = 1;\r\n        if (!this.moving && this.grounded) {\r\n            let animState = this.animation.play(\"walk\");\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n            this.moving = true;\r\n        }\r\n\r\n       \r\n        this.movingLeft = true;\r\n        if (this.isPlayer) {\r\n            if (this.node.scaleY < this.maxScale)\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.smallMoveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            else\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.moveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            this.busy = false;\r\n            \r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"left\");\r\n        }\r\n\r\n    },\r\n    jump() {\r\n        if (this.isPlayer) {\r\n            if (this.grounded) {\r\n                this.sounds[\"jump\"].play();\r\n                this.animation.play(\"jump\");\r\n                this.grounded = false;\r\n                \r\n                this.scheduleOnce(function () {\r\n                    //different jump heights depending on size\r\n                    if (this.node.scaleY >= this.maxScale)\r\n                        this.getComponent(cc.RigidBody).linearVelocity = cc.v2(this.getComponent(cc.RigidBody).linearVelocity.x, this.jumpHeight * this.deltaTime);\r\n                    else\r\n                        this.getComponent(cc.RigidBody).linearVelocity = cc.v2(this.getComponent(cc.RigidBody).linearVelocity.x, this.smallJumpHeight * this.deltaTime);\r\n                    this.startTimer = true;\r\n\r\n\r\n                    this.clientScript.getComponent(\"client\").sendPlayerState(\"jump\");\r\n                }, 0.1);\r\n            } \r\n        }\r\n        else {\r\n            this.animation.stop(\"walk\");\r\n            this.animation.play(\"jump\");    \r\n            this.grounded = false;\r\n        }\r\n        \r\n\r\n    },\r\n    stopX() {\r\n        this.animation.stop(\"walk\");\r\n        this.busy = false;\r\n        if (this.moving)\r\n            this.playingAnimation = false;\r\n        this.movingLeft = false;\r\n        this.movingRight = false;\r\n        this.moving = false;\r\n        if (this.isPlayer) {\r\n            //cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer = 0;\r\n            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(0, this.ySpeed);\r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"stopX\");\r\n            \r\n        }  \r\n\r\n    },\r\n    stopY() {\r\n\r\n        if (this.isPlayer) {\r\n            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, 0);\r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"stopY\");\r\n        }\r\n\r\n    },\r\n\r\n    shrink() {\r\n        if (this.isPlayer && this.atePotion) {\r\n            this.sounds[\"drinking2\"].play();\r\n            this.growing = -1;\r\n        }\r\n    },\r\n\r\n    grow() {\r\n        if (this.isPlayer && this.ateCake) {\r\n            this.sounds[\"eating\"].play();\r\n            this.growing = 1;\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onKeyDown(event) {\r\n\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.w:\r\n                if (this.grounded)\r\n                    this.jump();\r\n                break;\r\n            case cc.macro.KEY.a:\r\n                this.moveLeft();\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.moveRight();\r\n                break;\r\n            case cc.macro.KEY.e:\r\n                this.grow();\r\n                break;\r\n            case cc.macro.KEY.q:\r\n                this.shrink();\r\n                break;\r\n            case cc.macro.KEY.e:\r\n                cc.find(\"system\").getComponent(\"gameManager\").showEmojis()\r\n        }\r\n\r\n    },\r\n\r\n\r\n    onKeyUp(event) {\r\n\r\n        if (event.keyCode == cc.macro.KEY.w) {\r\n            //this.stopY();\r\n            //this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, - 100);\r\n        }\r\n\r\n        if (event.keyCode == cc.macro.KEY.a) {\r\n            //this.stopX();\r\n            this.movingLeft = false;\r\n        }\r\n\r\n        if (event.keyCode == cc.macro.KEY.d) {\r\n            //this.stopX();\r\n            this.movingRight = false;\r\n        }\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.body = this.node.getChildByName(\"body\");\r\n        this.clientScript = cc.find(\"system\");\r\n\r\n        this.sounds = new Map();\r\n        //map sounds to their audioSource\r\n        for (var i = 0; i < this.soundController.getComponents(cc.AudioSource).length; i++) {\r\n            this.sounds[this.soundController.getComponents(cc.AudioSource)[i].clip.name] = this.soundController.getComponents(cc.AudioSource)[i];\r\n        }\r\n    },\r\n\r\n    onDestroy() {\r\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n        }\r\n        else {\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        }\r\n        \r\n    },\r\n\r\n    joystickStart(event) {\r\n        let touchPos = event.getLocation();\r\n        let out = cc.v2();\r\n        //use camera to get touch pos\r\n        cc.find(\"Canvas/mainCamera\").getComponent(cc.Camera).getScreenToWorldPoint(touchPos, out);\r\n        let localTouchPos = this.joystickBall.parent.convertToNodeSpaceAR(out);\r\n\r\n        //limit ball so it can't leave circle\r\n        this.limitJoystick(localTouchPos);\r\n\r\n        //change pos of ball accordingly\r\n        this.setJoystickBallPos(localTouchPos); \r\n        this.joystickVector = localTouchPos;\r\n\r\n        this.joystickMovePlayer();\r\n    },\r\n\r\n    joystickMove(event) {\r\n        let touch = event.getTouches()[0];\r\n        let touchPos = event.getLocation();\r\n        let out = cc.v2();\r\n        //use camera to get touch pos\r\n        cc.find(\"Canvas/mainCamera\").getComponent(cc.Camera).getScreenToWorldPoint(touchPos, out);\r\n        let localTouchPos = this.joystickBall.parent.convertToNodeSpaceAR(out);\r\n\r\n        //limit ball so it can't leave circle\r\n        this.limitJoystick(localTouchPos);\r\n\r\n        //change pos of ball accordingly\r\n        this.setJoystickBallPos(localTouchPos);\r\n        this.joystickVector = localTouchPos;\r\n\r\n        this.joystickMovePlayer();\r\n    },\r\n\r\n    joystickMovePlayer() {\r\n        //move player horizontally\r\n        if (this.joystickVector.x > 0)\r\n            this.moveRight();\r\n        else if (this.joystickVector.x < 0)\r\n            this.moveLeft();\r\n        \r\n\r\n        this.joystickMoving = true;\r\n        //move player vertically\r\n        //if (this.joystickVector.y > 10)\r\n        //    this.jump()\r\n    },\r\n    joystickEnd() {\r\n        //stop player\r\n        if (this.joystickMoving) {\r\n            this.movingLeft = false;\r\n            this.movingRight = false;\r\n            this.joystickMoving = false;\r\n        }\r\n        \r\n\r\n        this.joystickVector = cc.Vec2.ZERO;\r\n        this.setJoystickBallPos(cc.Vec2.ZERO);\r\n    },\r\n\r\n    setJoystickBallPos(pos) {\r\n        this.joystickBall.setPosition(pos);\r\n    },\r\n\r\n    limitJoystick(joystickVec) {\r\n        let inputMag = joystickVec.mag();\r\n        if (inputMag > this.joystickMax) {\r\n            joystickVec.mulSelf(this.joystickMax / inputMag);\r\n        }\r\n    },\r\n    update: function (dt) {\r\n \r\n        this.xSpeed = this.getComponent(cc.RigidBody).linearVelocity.x;\r\n        this.ySpeed = this.getComponent(cc.RigidBody).linearVelocity.y;\r\n        this.localCenter = this.getComponent(cc.RigidBody).getLocalCenter();\r\n        this.sum += dt;\r\n        this.total += 1;\r\n\r\n        if (!this.moving && this.grounded && !this.playingAnimation) {\r\n            this.animation.play(\"stand\");\r\n            this.playingAnimation = true;\r\n        }\r\n        \r\n        //if (dt < 0.02 && dt > 0.01)\r\n        //this.deltaTime = dt;\r\n        \r\n        //console.log(dt);\r\n\r\n        if (this.clientScript.getComponent(\"client\").gameStarted) {\r\n\r\n            if (this.clientScript.getComponent(\"client\").playerId == 0) {\r\n                //do nothing\r\n            } else {\r\n\r\n                \r\n\r\n                if (this.deltaTime == 0)\r\n                    this.deltaTime = dt;\r\n                else if (Math.abs(dt - (this.sum / this.total)) < 0.03)\r\n                    this.deltaTime = dt;\r\n\r\n                if (this.clientScript.getComponent(\"client\").playerId == this.node.name && !this.isPlayer) {\r\n                    this.isPlayer = true;\r\n                    let rb = this.getComponent(cc.RigidBody);\r\n\r\n                    // if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n\r\n                    //     //set mobile touch control listeners\r\n                    //     cc.find(\"Canvas/UI/MOBILE\").active = true;\r\n                    //     this.joystickBall = cc.find(\"Canvas/UI/MOBILE/JOYSTICK/BALL\");\r\n                    //     let joystick = cc.find(\"Canvas/UI/MOBILE/JOYSTICK\");\r\n                    //     let jumpButton = cc.find(\"Canvas/UI/MOBILE/JUMP\");\r\n                    //     let potionButton = cc.find(\"Canvas/UI/MOBILE/POTION\");\r\n                    //     let cakeButton = cc.find(\"Canvas/UI/MOBILE/CAKE\");\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_START, this.joystickStart, this);\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_MOVE, this.joystickMove, this);\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_END, this.joystickEnd, this);\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_CANCEL, this.joystickEnd, this);\r\n                    //     jumpButton.on(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n                    //     potionButton.on(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n                    //     cakeButton.on(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n\r\n                    // } else {\r\n                    //     this.joystickBall = cc.find(\"Canvas/UI/MOBILE/JOYSTICK/BALL\");\r\n                    //     let joystick = cc.find(\"Canvas/UI/MOBILE/JOYSTICK\");\r\n                    //     let jumpButton = cc.find(\"Canvas/UI/MOBILE/JUMP\");\r\n                    //     let potionButton = cc.find(\"Canvas/UI/MOBILE/POTION\");\r\n                    //     let cakeButton = cc.find(\"Canvas/UI/MOBILE/CAKE\");\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_START, this.joystickStart, this);\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_MOVE, this.joystickMove, this);\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_END, this.joystickEnd, this);\r\n                    //     joystick.on(cc.Node.EventType.TOUCH_CANCEL, this.joystickEnd, this);\r\n                    //     jumpButton.on(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n                    //     potionButton.on(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n                    //     cakeButton.on(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n\r\n\r\n                    //     cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n                    //     cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n                    // }\r\n\r\n                    if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n                        //set mobile touch control listeners\r\n                        cc.find(\"Canvas/UI/MOBILE\").active = true;\r\n                    }\r\n\r\n                    this.leftButton.on(cc.Node.EventType.TOUCH_START, this.moveLeft, this);\r\n                    this.rightButton.on(cc.Node.EventType.TOUCH_START, this.moveRight, this);\r\n                    this.jumpButton.on(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n                    this.potionButton.on(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n                    this.cakeButton.on(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n                    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n                    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n                }\r\n            }\r\n        }\r\n        \r\n        \r\n       // this.getComponent(cc.RigidBody).gravityScale = dt *     ;\r\n        //if (this.ySpeed < 0) {\r\n        //    //console.log(cc.Vec2(0, cc.director.getPhysicsManager().gravity.y * (this.fallMultiplier - 1) * this.deltaTime));\r\n        //    //.log(cc.director.getPhysicsManager().gravity.y * (this.fallMultiplier - 1) * this.deltaTime);\r\n\r\n        //    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, this.ySpeed + cc.director.getPhysicsManager().gravity.y* this.deltaTime);\r\n        //}\r\n\r\n        //if (this.ySpeed > 0 && !jump) {\r\n        //    this.getComponent(cc.RigidBody).linearVelocity += cc.Vec2(this.xSpeed, cc.director.getPhysicsManager().gravity.y * 1 * this.deltaTime);\r\n        //}\r\n\r\n        // grow = -1 means shrining\r\n\r\n        if (this.isPlayer) {\r\n             \r\n\r\n            if (this.grounded && !cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer > 2 || cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer < 2) {\r\n                if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer > 2)\r\n                    cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer -= dt * 200;\r\n                else if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer < 2)\r\n                    cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer += dt * 200;\r\n\r\n            }\r\n            \r\n            if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer < 50 && this.movingRight)\r\n                cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer += dt * 200;\r\n\r\n            if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer > -50 && this.movingLeft)\r\n                cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer -= dt * 200;\r\n            \r\n            //custom gravity\r\n            //if (!this.grounded)\r\n            //    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, - 100 * Math.abs(this.ySpeed) + -10);\r\n            //console.log(dt * 1000);\r\n\r\n            cc.director.getPhysicsManager().gravity = cc.v2(0, -this.deltaTime * 1000);\r\n            this.node.getComponent(cc.RigidBody).gravityScale = this.deltaTime * 3000;\r\n            \r\n\r\n            if (!this.movingRight && !this.movingLeft)\r\n                this.stopX();\r\n\r\n            if (this.growing == 1) {\r\n\r\n                if (this.maxScale > this.node.scaleY) {\r\n                    this.node.scaleX += 0.05 * dt;\r\n                    this.node.scaleY += 0.05 * dt;\r\n\r\n                } else {\r\n                    this.growing = 0;\r\n\r\n                    // increase player velocity if on ground\r\n                    if (this.grounded) {\r\n                        if (this.movingRight)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.moveSpeed * this.deltaTime, this.ySpeed);\r\n                        else if (this.movingLeft)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.moveSpeed * this.deltaTime, this.ySpeed);\r\n                    }    \r\n                    \r\n                }\r\n            } else if (this.growing == -1) {\r\n\r\n                if (this.minScale < this.node.scaleY) {\r\n                    this.node.scaleX -= 0.05 * dt;\r\n                    this.node.scaleY -= 0.05 * dt;\r\n                } else {\r\n\r\n                    this.growing = 0;\r\n\r\n                    // decrease player velocity if on ground\r\n                    if (this.grounded) {\r\n                        if (this.movingRight)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n                        else if (this.movingLeft)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n\r\n    },\r\n});\r\n"]}