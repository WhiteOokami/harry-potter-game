{"version":3,"sources":["assets\\code\\movement.js"],"names":["cc","Class","Component","properties","jumpHeight","smallJumpHeight","jumpDuration","moveSpeed","smallMoveSpeed","isPlayer","clientScript","Node","xSpeed","ySpeed","localCenter","grounder","body","animation","Animation","deltaTime","fallMultiplier","growing","maxScale","minScale","ateCake","atePotion","grounded","movingRight","movingLeft","joystickMax","joystickVector","v2","joystickBall","emojis","timeStep","startTimer","playingAnimation","joystickMoving","playedFalling","soundController","sounds","busy","total","sum","disable","console","log","sys","platform","WECHAT_GAME","joystick","find","jumpButton","potionButton","cakeButton","off","EventType","TOUCH_START","joystickStart","TOUCH_MOVE","joystickMove","TOUCH_END","joystickEnd","TOUCH_CANCEL","jump","shrink","grow","systemEvent","SystemEvent","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","node","getComponent","RigidBody","gravityScale","linearVelocity","Vec2","playEmoji","type","emoji","getChildByName","active","tween","to","position","x","Math","ceil","random","round","y","easing","start","delay","call","onBeginContact","contact","self","other","tag","group","moving","play","scheduleOnce","scaleY","onEndContact","jumpRunAction","jumpUp","by","jumpDown","sequence","moveRight","scaleX","animState","wrapMode","WrapMode","Loop","sendPlayerState","moveLeft","stop","stopX","stopY","event","keyCode","macro","KEY","w","a","d","e","q","space","onLoad","Map","i","getComponents","AudioSource","length","clip","name","onDestroy","touchPos","getLocation","out","Camera","getScreenToWorldPoint","localTouchPos","parent","convertToNodeSpaceAR","limitJoystick","setJoystickBallPos","joystickMovePlayer","touch","getTouches","ZERO","pos","setPosition","joystickVec","inputMag","mag","mulSelf","update","dt","getLocalCenter","gameStarted","playerId","abs","rb","on","yOffsetPlayer","xOffsetPlayer","director","getPhysicsManager","gravity"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    \r\n    properties: {\r\n        jumpHeight: 0,\r\n        smallJumpHeight: 0,\r\n        jumpDuration: 0,\r\n        moveSpeed: 0,\r\n        smallMoveSpeed: 0,\r\n        isPlayer: false,\r\n        clientScript: cc.Node,\r\n        xSpeed: 0,\r\n        ySpeed: 0,\r\n        localCenter: 0,\r\n        grounder: cc.Node,\r\n        body: cc.Node,\r\n        animation: cc.Animation,\r\n        deltaTime: 0,\r\n        fallMultiplier: 2.5,\r\n        growing: 0,\r\n        maxScale: 1,\r\n        minScale: 0.5,\r\n        ateCake: false,\r\n        atePotion: false,\r\n        grounded: false,\r\n        movingRight: false,\r\n        movingLeft: false,\r\n        joystickMax: 69,\r\n        joystickVector: cc.v2(),\r\n        joystickBall: cc.Node,\r\n        emojis: cc.Node,\r\n        timeStep: 0,\r\n        startTimer: false,\r\n        playingAnimation: true,\r\n        joystickMoving: false,\r\n        playedFalling: false,\r\n        soundController: cc.Node,\r\n        sounds: null,\r\n        busy: false,\r\n\r\n        total: 0,\r\n        sum: 0,\r\n    },\r\n\r\n    disable() {\r\n        console.log(\"disabled\");\r\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n            let joystick = cc.find(\"Canvas/mainCamera/UI/MOBILE/JOYSTICK\");\r\n            let jumpButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/JUMP\");\r\n            let potionButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/POTION\");\r\n            let cakeButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/CAKE\");\r\n            joystick.off(cc.Node.EventType.TOUCH_START, this.joystickStart, this);\r\n            joystick.off(cc.Node.EventType.TOUCH_MOVE, this.joystickMove, this);\r\n            joystick.off(cc.Node.EventType.TOUCH_END, this.joystickEnd, this);\r\n            joystick.off(cc.Node.EventType.TOUCH_CANCEL, this.joystickEnd, this);\r\n            jumpButton.off(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n            potionButton.off(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n            cakeButton.off(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n        } else {\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        }\r\n        \r\n        this.node.getComponent(cc.RigidBody).gravityScale = 0;\r\n        this.node.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(0, 0);\r\n        \r\n    },\r\n    playEmoji(type) {\r\n        let emoji = this.emojis.getChildByName(type);\r\n        console.log(\"emoting\");\r\n        //no spam error\r\n        if (! emoji.active) {\r\n            emoji.active = true;\r\n            cc.tween(emoji).to(0.5, { position: cc.v2(this.node.x + Math.ceil(Math.random() * 1000) * (Math.round(Math.random()) ? 1 : -1), this.node.y + 2000) }, { easing: 'sineOutIn' }).start();\r\n            cc.tween(emoji).delay(1).to(0, { position: cc.v2(this.node.getChildByName(\"body\").getChildByName(\"head\").x, this.node.getChildByName(\"body\").getChildByName(\"head\").y) }).call(() => { emoji.active = false }).start();\r\n        }\r\n        \r\n        //this.schedule(function () { emoji.active = false }, 2);\r\n    },\r\n    onBeginContact(contact, self, other) {\r\n        console.log(\"touched\");\r\n        if (self.tag == 2 && (other.node.group == \"environment\" || other.node.group == \"movingPlatform\")){\r\n\r\n            this.grounded = true;\r\n            //stop falling animation\r\n            //this.animation.stop(\"falling\");\r\n            //this.playedFalling = false;\r\n\r\n            //play  animations\r\n            if (this.moving) {\r\n                this.animation.play(\"walk\");\r\n            } else {\r\n                this.animation.play(\"land\");\r\n                if (this.isPlayer)\r\n                    this.sounds[\"landing\"].play();\r\n\r\n                this.scheduleOnce(function () {\r\n                    this.playingAnimation = false;\r\n                }, 0.3);\r\n                \r\n            }\r\n\r\n            //change speed if different size\r\n            if (this.node.scaleY < this.maxScale) {\r\n                if (this.movingRight)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n                else if (this.movingLeft)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n            } else {\r\n                if (this.movingRight)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.moveSpeed * this.deltaTime, this.ySpeed);\r\n                else if (this.movingLeft)\r\n                    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.moveSpeed * this.deltaTime, this.ySpeed);\r\n            }\r\n\r\n            \r\n        }\r\n            \r\n    },\r\n\r\n    onEndContact(contact, self, other) {\r\n        if (self.tag == 2)\r\n            this.grounded = false;\r\n    },\r\n    jumpRunAction() {\r\n        var jumpUp = cc.tween().by(1, { y: 300 }, { easing: 'sineOut' });\r\n        var jumpDown = cc.tween().by(1, { y: -300 }, { easing: 'sineIn' });\r\n        cc.tween(this.node).sequence(jumpUp, jumpDown).start();\r\n    },\r\n\r\n    moveRight() {\r\n   \r\n        this.movingLeft = false;\r\n        this.body.scaleX = -1;\r\n        if (!this.moving && this.grounded) {\r\n            let animState = this.animation.play(\"walk\");\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n            this.moving = true;\r\n        }\r\n        this.movingRight = true;\r\n        if (this.isPlayer) {\r\n            this.busy = false;\r\n            if (this.node.scaleY < this.maxScale)\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.smallMoveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            else\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.moveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            \r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"right\");\r\n        }\r\n    },\r\n    moveLeft() {\r\n   \r\n        this.movingRight = false;\r\n        this.body.scaleX = 1;\r\n        if (!this.moving && this.grounded) {\r\n            let animState = this.animation.play(\"walk\");\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n            this.moving = true;\r\n        }\r\n\r\n       \r\n        this.movingLeft = true;\r\n        if (this.isPlayer) {\r\n            if (this.node.scaleY < this.maxScale)\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.smallMoveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            else\r\n                this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.moveSpeed * this.deltaTime, this.getComponent(cc.RigidBody).linearVelocity.y);\r\n            this.busy = false;\r\n            \r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"left\");\r\n        }\r\n\r\n    },\r\n    jump() {\r\n        if (this.isPlayer) {\r\n            if (this.grounded) {\r\n                this.sounds[\"jump\"].play();\r\n                this.animation.play(\"jump\");\r\n                this.grounded = false;\r\n                \r\n                this.scheduleOnce(function () {\r\n                    //different jump heights depending on size\r\n                    if (this.node.scaleY >= this.maxScale)\r\n                        this.getComponent(cc.RigidBody).linearVelocity = cc.v2(this.getComponent(cc.RigidBody).linearVelocity.x, this.jumpHeight * this.deltaTime);\r\n                    else\r\n                        this.getComponent(cc.RigidBody).linearVelocity = cc.v2(this.getComponent(cc.RigidBody).linearVelocity.x, this.smallJumpHeight * this.deltaTime);\r\n                    this.startTimer = true;\r\n\r\n\r\n                    this.clientScript.getComponent(\"client\").sendPlayerState(\"jump\");\r\n                }, 0.1);\r\n            } \r\n        }\r\n        else {\r\n            this.animation.stop(\"walk\");\r\n            this.animation.play(\"jump\");    \r\n            this.grounded = false;\r\n        }\r\n        \r\n\r\n    },\r\n    stopX() {\r\n        this.animation.stop(\"walk\");\r\n        this.busy = false;\r\n        if (this.moving)\r\n            this.playingAnimation = false;\r\n        this.movingLeft = false;\r\n        this.movingRight = false;\r\n        this.moving = false;\r\n        if (this.isPlayer) {\r\n            //cc.find(\"Canvas/mainCamera/\").getComponent(\"cameraFollow\").xOffsetPlayer = 0;\r\n            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(0, this.ySpeed);\r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"stopX\");\r\n            \r\n        }  \r\n\r\n    },\r\n    stopY() {\r\n\r\n        if (this.isPlayer) {\r\n            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, 0);\r\n            this.clientScript.getComponent(\"client\").sendPlayerState(\"stopY\");\r\n        }\r\n\r\n    },\r\n\r\n    shrink() {\r\n        if (this.isPlayer && this.atePotion) {\r\n            this.sounds[\"drinking2\"].play();\r\n            this.growing = -1;\r\n        }\r\n    },\r\n\r\n    grow() {\r\n        if (this.isPlayer && this.ateCake) {\r\n            this.sounds[\"eating\"].play();\r\n            this.growing = 1;\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onKeyDown(event) {\r\n\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.w:\r\n                if (this.grounded)\r\n                    this.jump();\r\n                else\r\n                    console.log(\"not grouned\");\r\n                break;\r\n            case cc.macro.KEY.a:\r\n                this.moveLeft();\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.moveRight();\r\n                break;\r\n            case cc.macro.KEY.e:\r\n                this.grow();\r\n                break;\r\n            case cc.macro.KEY.q:\r\n                this.shrink();\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                if (this.grounded)\r\n                    this.jump();\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n\r\n    onKeyUp(event) {\r\n\r\n        if (event.keyCode == cc.macro.KEY.w) {\r\n            //this.stopY();\r\n            //this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, - 100);\r\n        }\r\n\r\n        if (event.keyCode == cc.macro.KEY.a) {\r\n            //this.stopX();\r\n            this.movingLeft = false;\r\n        }\r\n\r\n        if (event.keyCode == cc.macro.KEY.d) {\r\n            //this.stopX();\r\n            this.movingRight = false;\r\n        }\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.body = this.node.getChildByName(\"body\");\r\n        this.clientScript = cc.find(\"system\");\r\n\r\n        this.sounds = new Map();\r\n        //map sounds to their audioSource\r\n        for (var i = 0; i < this.soundController.getComponents(cc.AudioSource).length; i++) {\r\n            this.sounds[this.soundController.getComponents(cc.AudioSource)[i].clip.name] = this.soundController.getComponents(cc.AudioSource)[i];\r\n        }\r\n    },\r\n\r\n    onDestroy() {\r\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n        }\r\n        else {\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        }\r\n        \r\n    },\r\n\r\n    joystickStart(event) {\r\n        let touchPos = event.getLocation();\r\n        let out = cc.v2();\r\n        //use camera to get touch pos\r\n        cc.find(\"Canvas/mainCamera\").getComponent(cc.Camera).getScreenToWorldPoint(touchPos, out);\r\n        let localTouchPos = this.joystickBall.parent.convertToNodeSpaceAR(out);\r\n\r\n        //limit ball so it can't leave circle\r\n        this.limitJoystick(localTouchPos);\r\n\r\n        //change pos of ball accordingly\r\n        this.setJoystickBallPos(localTouchPos); \r\n        this.joystickVector = localTouchPos;\r\n\r\n        this.joystickMovePlayer();\r\n    },\r\n\r\n    joystickMove(event) {\r\n        let touch = event.getTouches()[0];\r\n        let touchPos = event.getLocation();\r\n        let out = cc.v2();\r\n        //use camera to get touch pos\r\n        cc.find(\"Canvas/mainCamera\").getComponent(cc.Camera).getScreenToWorldPoint(touchPos, out);\r\n        let localTouchPos = this.joystickBall.parent.convertToNodeSpaceAR(out);\r\n\r\n        //limit ball so it can't leave circle\r\n        this.limitJoystick(localTouchPos);\r\n\r\n        //change pos of ball accordingly\r\n        this.setJoystickBallPos(localTouchPos);\r\n        this.joystickVector = localTouchPos;\r\n\r\n        this.joystickMovePlayer();\r\n    },\r\n\r\n    joystickMovePlayer() {\r\n        //move player horizontally\r\n        if (this.joystickVector.x > 0)\r\n            this.moveRight();\r\n        else if (this.joystickVector.x < 0)\r\n            this.moveLeft();\r\n        \r\n\r\n        this.joystickMoving = true;\r\n        //move player vertically\r\n        //if (this.joystickVector.y > 10)\r\n        //    this.jump()\r\n    },\r\n    joystickEnd() {\r\n        //stop player\r\n        if (this.joystickMoving) {\r\n            this.movingLeft = false;\r\n            this.movingRight = false;\r\n            this.joystickMoving = false;\r\n        }\r\n        \r\n\r\n        this.joystickVector = cc.Vec2.ZERO;\r\n        this.setJoystickBallPos(cc.Vec2.ZERO);\r\n    },\r\n\r\n    setJoystickBallPos(pos) {\r\n        this.joystickBall.setPosition(pos);\r\n    },\r\n\r\n    limitJoystick(joystickVec) {\r\n        let inputMag = joystickVec.mag();\r\n        if (inputMag > this.joystickMax) {\r\n            joystickVec.mulSelf(this.joystickMax / inputMag);\r\n        }\r\n    },\r\n    update: function (dt) {\r\n \r\n        this.xSpeed = this.getComponent(cc.RigidBody).linearVelocity.x;\r\n        this.ySpeed = this.getComponent(cc.RigidBody).linearVelocity.y;\r\n        this.localCenter = this.getComponent(cc.RigidBody).getLocalCenter();\r\n        this.sum += dt;\r\n        this.total += 1;\r\n\r\n        if (!this.moving && this.grounded && !this.playingAnimation) {\r\n            this.animation.play(\"stand\");   \r\n            this.playingAnimation = true;\r\n        }\r\n        \r\n        //if (dt < 0.02 && dt > 0.01)\r\n        //this.deltaTime = dt;\r\n        \r\n        //console.log(dt);\r\n\r\n        if (this.clientScript.getComponent(\"client\").gameStarted) {\r\n\r\n            if (this.clientScript.getComponent(\"client\").playerId == 0) {\r\n                //do nothing\r\n            } else {\r\n\r\n                \r\n\r\n                if (this.deltaTime == 0)\r\n                    this.deltaTime = dt;\r\n                else if (Math.abs(dt - (this.sum / this.total)) < 0.03)\r\n                    this.deltaTime = dt;\r\n\r\n                if (this.clientScript.getComponent(\"client\").playerId == this.node.name && !this.isPlayer) {\r\n                    this.isPlayer = true;\r\n                    let rb = this.getComponent(cc.RigidBody);\r\n\r\n                    if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n\r\n                        //set mobile touch control listeners\r\n                        cc.find(\"Canvas/mainCamera/UI/MOBILE\").active = true;\r\n                        this.joystickBall = cc.find(\"Canvas/mainCamera/UI/MOBILE/JOYSTICK/BALL\");\r\n                        let joystick = cc.find(\"Canvas/mainCamera/UI/MOBILE/JOYSTICK\");\r\n                        let jumpButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/JUMP\");\r\n                        let potionButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/POTION\");\r\n                        let cakeButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/CAKE\");\r\n                        joystick.on(cc.Node.EventType.TOUCH_START, this.joystickStart, this);\r\n                        joystick.on(cc.Node.EventType.TOUCH_MOVE, this.joystickMove, this);\r\n                        joystick.on(cc.Node.EventType.TOUCH_END, this.joystickEnd, this);\r\n                        joystick.on(cc.Node.EventType.TOUCH_CANCEL, this.joystickEnd, this);\r\n                        jumpButton.on(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n                        potionButton.on(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n                        cakeButton.on(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n\r\n                    } else {\r\n                        this.joystickBall = cc.find(\"Canvas/mainCamera/UI/MOBILE/JOYSTICK/BALL\");\r\n                        let joystick = cc.find(\"Canvas/mainCamera/UI/MOBILE/JOYSTICK\");\r\n                        let jumpButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/JUMP\");\r\n                        let potionButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/POTION\");\r\n                        let cakeButton = cc.find(\"Canvas/mainCamera/UI/MOBILE/CAKE\");\r\n                        joystick.on(cc.Node.EventType.TOUCH_START, this.joystickStart, this);\r\n                        joystick.on(cc.Node.EventType.TOUCH_MOVE, this.joystickMove, this);\r\n                        joystick.on(cc.Node.EventType.TOUCH_END, this.joystickEnd, this);\r\n                        joystick.on(cc.Node.EventType.TOUCH_CANCEL, this.joystickEnd, this);\r\n                        jumpButton.on(cc.Node.EventType.TOUCH_START, this.jump, this);\r\n                        potionButton.on(cc.Node.EventType.TOUCH_START, this.shrink, this);\r\n                        cakeButton.on(cc.Node.EventType.TOUCH_START, this.grow, this);\r\n\r\n\r\n                        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n                        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        \r\n        \r\n       // this.getComponent(cc.RigidBody).gravityScale = dt *     ;\r\n        //if (this.ySpeed < 0) {\r\n        //    //console.log(cc.Vec2(0, cc.director.getPhysicsManager().gravity.y * (this.fallMultiplier - 1) * this.deltaTime));\r\n        //    //.log(cc.director.getPhysicsManager().gravity.y * (this.fallMultiplier - 1) * this.deltaTime);\r\n\r\n        //    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, this.ySpeed + cc.director.getPhysicsManager().gravity.y* this.deltaTime);\r\n        //}\r\n\r\n        //if (this.ySpeed > 0 && !jump) {\r\n        //    this.getComponent(cc.RigidBody).linearVelocity += cc.Vec2(this.xSpeed, cc.director.getPhysicsManager().gravity.y * 1 * this.deltaTime);\r\n        //}\r\n\r\n        // grow = -1 means shrining\r\n\r\n        if (this.isPlayer) {\r\n             \r\n\r\n            if (this.grounded && !cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer > 2 || cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer < 2) {\r\n                if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer > 2)\r\n                    cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer -= dt * 200;\r\n                else if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer < 2)\r\n                    cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").yOffsetPlayer += dt * 200;\r\n\r\n            }\r\n            \r\n            if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer < 50 && this.movingRight)\r\n                cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer += dt * 200;\r\n\r\n            if (cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer > -50 && this.movingLeft)\r\n                cc.find(\"Canvas/mainCamera\").getComponent(\"cameraFollow\").xOffsetPlayer -= dt * 200;\r\n            \r\n            //custom gravity\r\n            //if (!this.grounded)\r\n            //    this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.xSpeed, - 100 * Math.abs(this.ySpeed) + -10);\r\n            //console.log(dt * 1000);\r\n\r\n            cc.director.getPhysicsManager().gravity = cc.v2(0, -this.deltaTime * 2000);\r\n            this.node.getComponent(cc.RigidBody).gravityScale = this.deltaTime * 6000;\r\n            \r\n\r\n            if (!this.movingRight && !this.movingLeft)\r\n                this.stopX();\r\n\r\n            if (this.growing == 1) {\r\n\r\n                if (this.maxScale > this.node.scaleY) {\r\n                    this.node.scaleX += 0.05 * dt;\r\n                    this.node.scaleY += 0.05 * dt;\r\n\r\n                } else {\r\n                    this.growing = 0;\r\n\r\n                    // increase player velocity if on ground\r\n                    if (this.grounded) {\r\n                        if (this.movingRight)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.moveSpeed * this.deltaTime, this.ySpeed);\r\n                        else if (this.movingLeft)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.moveSpeed * this.deltaTime, this.ySpeed);\r\n                    }    \r\n                    \r\n                }\r\n            } else if (this.growing == -1) {\r\n\r\n                if (this.minScale < this.node.scaleY) {\r\n                    this.node.scaleX -= 0.05 * dt;\r\n                    this.node.scaleY -= 0.05 * dt;\r\n                } else {\r\n\r\n                    this.growing = 0;\r\n\r\n                    // decrease player velocity if on ground\r\n                    if (this.grounded) {\r\n                        if (this.movingRight)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n                        else if (this.movingLeft)\r\n                            this.getComponent(cc.RigidBody).linearVelocity = cc.Vec2(-this.smallMoveSpeed * this.deltaTime, this.ySpeed);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n\r\n    },\r\n});\r\n"]}