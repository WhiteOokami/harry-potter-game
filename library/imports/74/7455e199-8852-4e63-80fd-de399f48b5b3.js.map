{"version":3,"sources":["assets\\code\\cameraFollow.js"],"names":["player","cc","Class","Component","properties","following","ui","Node","yOffset","startPos","xOffsetPlayer","yOffsetPlayer","maxOffset","startY","onLoad","start","y","update","dt","find","getComponent","myPlayer","playerId","m","movingRight","movingLeft","node","x"],"mappings":";;;;;;AAAA,IAAIA,MAAM,GAAG,IAAb;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRJ,IAAAA,MAAM,EAAE,IADA;AAERK,IAAAA,SAAS,EAAE,KAFH;AAGR;AACAC,IAAAA,EAAE,EAAEL,EAAE,CAACM,IAJC;AAKRC,IAAAA,OAAO,EAAE,CALD;AAMR;AACAC,IAAAA,QAAQ,EAAE,EAPF;AAQRC,IAAAA,aAAa,EAAE,CARP;AASRC,IAAAA,aAAa,EAAE,CATP;AAURC,IAAAA,SAAS,EAAE,EAVH;AAWRC,IAAAA,MAAM,EAAE;AAXA,GAHP;AAiBL;AAEAC,EAAAA,MAnBK,oBAmBI;AACL,SAAKL,QAAL,GAAgB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAhB;AACH,GArBI;AAwBLM,EAAAA,KAxBK,mBAwBG;AACJF,IAAAA,MAAM,GAAG,KAAKb,MAAL,CAAYgB,CAArB;AACH,GA1BI;AA4BLC,EAAAA,MA5BK,kBA4BEC,EA5BF,EA4BM;AACP,QAAI,CAAC,KAAKb,SAAV,EAAqB;AACjB,UAAIJ,EAAE,CAACkB,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCC,QAAzC,IAAqD,IAAzD,EAA+D;AAC3D,aAAKrB,MAAL,GAAcC,EAAE,CAACkB,IAAH,CAAQ,oBAAoBlB,EAAE,CAACkB,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCE,QAArE,CAAd;AACA,aAAKjB,SAAL,GAAiB,IAAjB;AACH;AACJ,KALD,MAKO;AACH,UAAIkB,CAAC,GAAG,KAAKvB,MAAL,CAAYoB,YAAZ,CAAyB,UAAzB,CAAR;AACA,UAAGG,CAAC,CAACC,WAAF,IAAiB,KAAKd,aAAL,GAAqB,KAAKE,SAA9C,EACI,KAAKF,aAAL,IAAsB,KAAGQ,EAAzB,CADJ,KAEK,IAAGK,CAAC,CAACE,UAAF,IAAgB,KAAKf,aAAL,GAAqB,CAAC,KAAKE,SAA9C,EACD,KAAKF,aAAL,IAAsB,KAAGQ,EAAzB,CADC,KAGD,KAAKR,aAAL,IAAoB,EAApB;AACJ,WAAKgB,IAAL,CAAUC,CAAV,GAAc,KAAK3B,MAAL,CAAY2B,CAAZ,GAAgB,KAAKjB,aAAnC;AACA,WAAKgB,IAAL,CAAUV,CAAV,GAAc,KAAKhB,MAAL,CAAYgB,CAAZ,GAAgB,CAAC,KAAKhB,MAAL,CAAYgB,CAAZ,GAAcH,MAAf,IAAuB,GAArD;AACH,KAhBM,CAiBP;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAKP,EAAL,CAAQqB,CAAR,GAAY,KAAKD,IAAL,CAAUC,CAAtB;AACA,SAAKrB,EAAL,CAAQU,CAAR,GAAY,KAAKU,IAAL,CAAUV,CAAtB;AACH;AAxDI,CAAT","sourceRoot":"/","sourcesContent":["let player = null;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        player: null,\r\n        following: false,\r\n        // background: cc.Node,\r\n        ui: cc.Node,\r\n        yOffset: 0,\r\n        // paralaxLayers: [cc.Node],\r\n        startPos: [],\r\n        xOffsetPlayer: 0,\r\n        yOffsetPlayer: 0,\r\n        maxOffset: 20,\r\n        startY: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.startPos = [0, 0, 0, 0, 0, 0, 0];\r\n    },\r\n\r\n\r\n    start() {\r\n        startY = this.player.y;\r\n    },\r\n\r\n    update(dt) {\r\n        if (!this.following) {\r\n            if (cc.find(\"system\").getComponent(\"client\").myPlayer != null) {\r\n                this.player = cc.find(\"Canvas/Players/\" + cc.find(\"system\").getComponent(\"client\").playerId);\r\n                this.following = true;\r\n            }\r\n        } else {\r\n            let m = this.player.getComponent(\"movement\")\r\n            if(m.movingRight && this.xOffsetPlayer < this.maxOffset)\r\n                this.xOffsetPlayer += 20*dt\r\n            else if(m.movingLeft && this.xOffsetPlayer > -this.maxOffset)\r\n                this.xOffsetPlayer -= 20*dt\r\n            else\r\n                this.xOffsetPlayer/=10\r\n            this.node.x = this.player.x + this.xOffsetPlayer;\r\n            this.node.y = this.player.y + (this.player.y-startY)*0.5;\r\n        }\r\n        // for (let i = 0; i < this.paralaxLayers.length; i++) {\r\n        //     this.paralaxLayers[i].setPosition(this.node.x / (i + 1) * 2 + this.startPos[i], this.node.y / (i + 1) * 2);\r\n\r\n        //     if (Math.abs(this.node.x - this.paralaxLayers[i].x) >= (this.paralaxLayers[i].width - this.node.width)) {\r\n        //         //this.paralaxLayers[i].setPosition(this.node.x + (this.node.x - this.paralaxLayers[i].x), this.node.y);\r\n        //         this.startPos[i] += this.node.x - this.paralaxLayers[i].x;\r\n        //     }\r\n        // }\r\n        // this.background.setPosition(this.node.x, this.node.y);\r\n        this.ui.x = this.node.x;\r\n        this.ui.y = this.node.y;\r\n    },\r\n});\r\n"]}