{"version":3,"sources":["assets\\code\\cameraFollow.js"],"names":["player","cc","Class","Component","properties","following","ui","Node","yOffset","startPos","xOffsetPlayer","yOffsetPlayer","maxOffset","onLoad","start","update","dt","find","getComponent","myPlayer","playerId","m","movingRight","movingLeft","node","x","y"],"mappings":";;;;;;AAAA,IAAIA,MAAM,GAAG,IAAb;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRJ,IAAAA,MAAM,EAAE,IADA;AAERK,IAAAA,SAAS,EAAE,KAFH;AAGR;AACAC,IAAAA,EAAE,EAAEL,EAAE,CAACM,IAJC;AAKRC,IAAAA,OAAO,EAAE,CALD;AAMR;AACAC,IAAAA,QAAQ,EAAE,EAPF;AAQRC,IAAAA,aAAa,EAAE,CARP;AASRC,IAAAA,aAAa,EAAE,CATP;AAURC,IAAAA,SAAS,EAAE;AAVH,GAHP;AAgBL;AAEAC,EAAAA,MAlBK,oBAkBI;AACL,SAAKJ,QAAL,GAAgB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAhB;AACH,GApBI;AAuBLK,EAAAA,KAvBK,mBAuBG,CACP,CAxBI;AA0BLC,EAAAA,MA1BK,kBA0BEC,EA1BF,EA0BM;AACP,QAAI,CAAC,KAAKX,SAAV,EAAqB;AACjB,UAAIJ,EAAE,CAACgB,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCC,QAAzC,IAAqD,IAAzD,EAA+D;AAC3D,aAAKnB,MAAL,GAAcC,EAAE,CAACgB,IAAH,CAAQ,oBAAoBhB,EAAE,CAACgB,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCE,QAArE,CAAd;AACA,aAAKf,SAAL,GAAiB,IAAjB;AACH;AACJ,KALD,MAKO;AACH,UAAIgB,CAAC,GAAG,KAAKrB,MAAL,CAAYkB,YAAZ,CAAyB,UAAzB,CAAR;AACA,UAAGG,CAAC,CAACC,WAAF,IAAiB,KAAKZ,aAAL,GAAqB,KAAKE,SAA9C,EACI,KAAKF,aAAL,IAAsB,KAAGM,EAAzB,CADJ,KAEK,IAAGK,CAAC,CAACE,UAAF,IAAgB,KAAKb,aAAL,GAAqB,CAAC,KAAKE,SAA9C,EACD,KAAKF,aAAL,IAAsB,KAAGM,EAAzB,CADC,KAGD,KAAKN,aAAL,IAAoB,EAApB;AACJ,WAAKc,IAAL,CAAUC,CAAV,GAAc,KAAKzB,MAAL,CAAYyB,CAAZ,GAAgB,KAAKf,aAAnC;AACA,WAAKc,IAAL,CAAUE,CAAV,GAAc,KAAK1B,MAAL,CAAY0B,CAAZ,GAAgB,KAAKlB,OAArB,GAA+B,KAAKG,aAAlD;AACH,KAhBM,CAiBP;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAKL,EAAL,CAAQmB,CAAR,GAAY,KAAKD,IAAL,CAAUC,CAAtB;AACA,SAAKnB,EAAL,CAAQoB,CAAR,GAAY,KAAKF,IAAL,CAAUE,CAAtB;AACH;AAtDI,CAAT","sourceRoot":"/","sourcesContent":["let player = null;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        player: null,\r\n        following: false,\r\n        // background: cc.Node,\r\n        ui: cc.Node,\r\n        yOffset: 0,\r\n        // paralaxLayers: [cc.Node],\r\n        startPos: [],\r\n        xOffsetPlayer: 0,\r\n        yOffsetPlayer: 0,\r\n        maxOffset: 20,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.startPos = [0, 0, 0, 0, 0, 0, 0];\r\n    },\r\n\r\n\r\n    start() {\r\n    },\r\n\r\n    update(dt) {\r\n        if (!this.following) {\r\n            if (cc.find(\"system\").getComponent(\"client\").myPlayer != null) {\r\n                this.player = cc.find(\"Canvas/Players/\" + cc.find(\"system\").getComponent(\"client\").playerId);\r\n                this.following = true;\r\n            }\r\n        } else {\r\n            let m = this.player.getComponent(\"movement\")\r\n            if(m.movingRight && this.xOffsetPlayer < this.maxOffset)\r\n                this.xOffsetPlayer += 20*dt\r\n            else if(m.movingLeft && this.xOffsetPlayer > -this.maxOffset)\r\n                this.xOffsetPlayer -= 20*dt\r\n            else\r\n                this.xOffsetPlayer/=10\r\n            this.node.x = this.player.x + this.xOffsetPlayer;\r\n            this.node.y = this.player.y + this.yOffset + this.yOffsetPlayer;\r\n        }\r\n        // for (let i = 0; i < this.paralaxLayers.length; i++) {\r\n        //     this.paralaxLayers[i].setPosition(this.node.x / (i + 1) * 2 + this.startPos[i], this.node.y / (i + 1) * 2);\r\n\r\n        //     if (Math.abs(this.node.x - this.paralaxLayers[i].x) >= (this.paralaxLayers[i].width - this.node.width)) {\r\n        //         //this.paralaxLayers[i].setPosition(this.node.x + (this.node.x - this.paralaxLayers[i].x), this.node.y);\r\n        //         this.startPos[i] += this.node.x - this.paralaxLayers[i].x;\r\n        //     }\r\n        // }\r\n        // this.background.setPosition(this.node.x, this.node.y);\r\n        this.ui.x = this.node.x;\r\n        this.ui.y = this.node.y;\r\n    },\r\n});\r\n"]}