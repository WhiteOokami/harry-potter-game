{"version":3,"sources":["assets\\code\\client.js"],"names":["payLoad","type","data","PlayerData","id","x","posX","posY","scaleY","scaleX","lives","name","status","key","roundNumber","rnum","rlength","newnumber","Math","round","pow","cc","Class","Component","properties","playerId","ws","players","playerPrefab","Prefab","myPlayer","port","startPlace","Node","timer","watch","myTime","enemies","won","countDown","items","shortOnTime","watchAnim","Animation","connectionErrorUI","socketClosed","potionPrefab","cakePrefab","gameStarted","startScreen","crowns","houseIndex","chestPrefab","serverIp","pointsLost","sendWebsocketMessage","message","active","sys","platform","WECHAT_GAME","send","JSON","stringify","sendPlayerState","state","sendEnemyState","position","enemy","sendItemState","pos","scheduleOnce","sendEmoji","event","customEventData","console","log","node","getComponent","showEmojis","createPlayer","player","instantiate","parent","find","y","getChildByName","Label","string","aPlayer","color","Color","WHITE","updatePlayer","thePlayer","moveRight","moveLeft","jump","stopX","stopY","updateEnemy","chasePlayer","updatePlayerPosition","setScale","removePlayer","destroy","updateTime","time","angle","getParent","play","wrapMode","WrapMode","Loop","stop","RED","timesUp","AudioSource","showCrowns","disconnect","os","closeSocket","close","updateItem","theItem","updateEmoji","playEmoji","startCountDown","num","recieveMessage","myData","parse","i","showWinners","addWinner","joinServer","wx","connectSocket","url","onOpen","onMessage","onError","onClose","WebSocket","addEventListener","onLoad","abp","room","Map","start","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["class payLoad {\r\n    constructor(type, data) {\r\n        this.type = type;\r\n        this.data = data;\r\n    }\r\n};\r\n\r\nclass PlayerData {\r\n    constructor(id, x) {\r\n        this.id = id;\r\n        this.x = x;\r\n        this.status = 0;\r\n        this.key = '';\r\n    }\r\n    posX = 0;\r\n    posY = 0;\r\n    scaleY = 0;\r\n    scaleX = 0;\r\n    lives = 3;\r\n    name = null;\r\n};\r\n\r\nfunction roundNumber(rnum, rlength) {\r\n    var newnumber = Math.round(rnum * Math.pow(10, rlength)) / Math.pow(10, rlength);\r\n    return newnumber;\r\n}\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        playerId: 0,\r\n        ws: null,\r\n        players: null,\r\n        playerPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        myPlayer: null,\r\n        port: null,\r\n        startPlace: cc.Node,\r\n        timer: cc.Node,\r\n        watch: cc.Node,\r\n        myTime: 0,\r\n        enemies: cc.Node,\r\n        won: false,\r\n        countDown: null,\r\n        items: cc.Node,\r\n        shortOnTime: false,\r\n        watchAnim: cc.Animation,\r\n        connectionErrorUI: cc.Node,\r\n        socketClosed: false,\r\n        potionPrefab: cc.Prefab,\r\n        cakePrefab: cc.Prefab,\r\n        gameStarted: false,\r\n        startScreen: cc.Node,\r\n        crowns: 0,\r\n        houseIndex: 0,\r\n        chestPrefab: cc.Prefab,\r\n        serverIp: \"\",\r\n        pointsLost: 0,\r\n    },\r\n    sendWebsocketMessage(type, message) {\r\n        if (!this.connectionErrorUI.active) {\r\n            if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n                this.ws.send({ data: JSON.stringify(new payLoad(type, message)) });\r\n            } else {\r\n                this.ws.send(JSON.stringify(new payLoad(type, message)));\r\n            }\r\n        }\r\n        \r\n    },\r\n    sendPlayerState(state) {\r\n        this.sendWebsocketMessage(\"updatePlayerState\", [this.playerId, state]);\r\n    },\r\n    sendEnemyState(state, position, enemy) {\r\n        this.sendWebsocketMessage(\"updateEnemy\", [this.playerId, position, state, enemy]);\r\n    },\r\n    sendItemState(id, state, type, pos) {\r\n        // delay chest spawn\r\n        if (type == \"chest\" && state == \"spawn\") {\r\n            this.scheduleOnce(function () { this.sendWebsocketMessage(\"updateItem\", [id, state, type, pos]);},3);\r\n        } else {\r\n            this.sendWebsocketMessage(\"updateItem\", [id, state, type, pos]);\r\n        }\r\n        \r\n    },\r\n    sendEmoji: function (event, customEventData) {\r\n        // send emoji, customEventData will be the type\r\n        console.log(\"send emoji\");\r\n        this.sendWebsocketMessage(\"emoji\", [this.playerId, customEventData]);\r\n        this.node.getComponent(\"gameManager\").showEmojis();\r\n    },\r\n    createPlayer(player) {\r\n        //my character\r\n        if (player.id == this.playerId) {\r\n            this.myPlayer = cc.instantiate(this.playerPrefab);\r\n            this.myPlayer.parent = cc.find(\"Canvas/Players\");\r\n            this.myPlayer.x = this.startPlace.x;\r\n            this.myPlayer.y = this.startPlace.y;\r\n            this.myPlayer.name = player.id;\r\n            this.myPlayer.getChildByName(\"nameTag\").getComponent(cc.Label).string = player.name;\r\n            this.myPlayer.id = player.id;\r\n            this.players[player.id] = this.myPlayer;\r\n        } else {\r\n            let aPlayer = cc.instantiate(this.playerPrefab);\r\n            aPlayer.parent = cc.find(\"Canvas/Players\");\r\n            aPlayer.x = this.startPlace.x;\r\n            aPlayer.y = this.startPlace.y;\r\n            aPlayer.name = player.id;\r\n            aPlayer.id = player.id;\r\n            aPlayer.getChildByName(\"nameTag\").getComponent(cc.Label).string = player.name;\r\n            aPlayer.getChildByName(\"nameTag\").color = cc.Color.WHITE;\r\n            this.players[player.id] = aPlayer;\r\n        }\r\n    },\r\n    updatePlayer(playerId, state) {\r\n        let thePlayer = this.players[playerId];\r\n        switch (state) {\r\n            case \"right\":\r\n                thePlayer.getComponent(\"movement\").moveRight();\r\n                break;\r\n            case \"left\":\r\n                thePlayer.getComponent(\"movement\").moveLeft();\r\n                break;\r\n            case \"jump\":\r\n                thePlayer.getComponent(\"movement\").jump();\r\n                break;\r\n            case \"stopX\":\r\n                thePlayer.getComponent(\"movement\").stopX();\r\n                break;\r\n            case \"stopY\":\r\n                thePlayer.getComponent(\"movement\").stopY();\r\n                break;\r\n        }\r\n    },\r\n    updateEnemy(playerId, position,state, enemy) {\r\n        let thePlayer = this.players[playerId];\r\n        switch (state) {\r\n            case \"chaseNew\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").chasePlayer(thePlayer);\r\n                break;\r\n            case \"right\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").moveRight();\r\n                break;\r\n            case \"left\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").moveLeft();\r\n                break;\r\n            case \"jump\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").jump();\r\n                break;\r\n            case \"position\":\r\n                this.enemies.getChildByName(enemy).x = position[0];\r\n                this.enemies.getChildByName(enemy).y = position[1];\r\n                break;\r\n        //    case \"stopX\":\r\n        //        this.enemies.getComponent(\"movement\").stopX();\r\n        //        break;\r\n        //    case \"stopY\":\r\n        //        this.enemies.getComponent(\"movement\").stopY();\r\n        //        break;\r\n        }\r\n    },\r\n    \r\n    updatePlayerPosition(player) {\r\n        \r\n        this.players[player.id].x = player.posX;\r\n        this.players[player.id].y = player.posY;\r\n        this.players[player.id].setScale(player.scaleX, player.scaleY);\r\n        //console.log(player.id + \" \" + player.scaleY + \" \" + player.scaleX);\r\n    },\r\n    removePlayer(player) {\r\n        this.players[player.id].destroy();\r\n        this.players.delete(player.id);\r\n    },\r\n    updateTime(time) {\r\n        //change time on watch according to countdown time\r\n        if ((this.countDown - time) >= 0) {\r\n            this.timer.getComponent(cc.Label).string = time;\r\n            this.watch.angle = - ((time * 360) / this.countDown - 90);\r\n            this.myTime = time;\r\n            if (!this.shortOnTime && (this.countDown - time) < 15) {\r\n                this.watchAnim = this.watch.getParent().getComponent(cc.Animation).play(\"shortOnTime\");\r\n                this.watchAnim.wrapMode = cc.WrapMode.Loop;\r\n                this.shortOnTime = true;\r\n            }\r\n        }\r\n        else {\r\n            if (this.shortOnTime) {\r\n                this.watchAnim.stop(\"shortOnTime\");\r\n                this.watch.getParent().color = cc.Color.RED;\r\n                cc.find(\"system\").getComponent(\"gameManager\").timesUp();\r\n                this.shortOnTime = false;\r\n\r\n                //play lose sound & lose crowns\r\n                if (!this.won) {\r\n                    cc.find(\"system\").getChildByName(\"AUDIO\").getChildByName(\"LOSE\").getComponent(cc.AudioSource).play();\r\n                    console.log(this.crowns);\r\n                    if (this.crowns > 30)\r\n                        this.node.getComponent(\"gameManager\").showCrowns(this.pointsLost);\r\n                    else\r\n                        this.node.getComponent(\"gameManager\").showCrowns(0);\r\n                }\r\n                   \r\n            }\r\n                \r\n        }\r\n    },\r\n    disconnect() {\r\n        this.socketClosed = true;\r\n        if (cc.sys.os == cc.sys.WECHAT_GAME)\r\n            this.ws.closeSocket();\r\n        else\r\n            this.ws.close();\r\n    },\r\n    updateItem(id, state, type, pos) {\r\n        if (state == \"used\")\r\n            this.items.getChildByName(type + id).destroy();\r\n        else if (state == \"spawn\") {\r\n            let theItem = null;\r\n\r\n            if (type == \"potion\")\r\n                theItem = cc.instantiate(this.potionPrefab);\r\n            else if (type == \"cake\")\r\n                theItem = cc.instantiate(this.cakePrefab);\r\n            else if (type == \"chest\")\r\n                theItem = cc.instantiate(this.chestPrefab);\r\n\r\n            theItem.x = pos[0];\r\n            theItem.y = pos[1];\r\n            theItem.parent = this.items;\r\n            theItem.name = type + id;\r\n            theItem.getComponent(\"item\").id = id;\r\n            //console.log(id);\r\n        }\r\n            \r\n    },\r\n    updateEmoji(id, type) {\r\n        console.log(\"playing \");\r\n        this.players[id].getComponent(\"movement\").playEmoji(type);\r\n    },\r\n    startCountDown(num) {\r\n        this.startScreen.active = true;\r\n        if (num == 0) {\r\n            this.startScreen.active = false;\r\n            this.gameStarted = true;\r\n        } else {\r\n            this.startScreen.getChildByName(\"NUM\").getComponent(cc.Label).string = num;\r\n        }\r\n    },\r\n    recieveMessage(data) {\r\n        let myData = JSON.parse(data);\r\n        switch (myData.type) {\r\n            case \"updatePlayerState\":\r\n                if (myData.data[0] != this.playerId) {\r\n                    this.updatePlayer(myData.data[0], myData.data[1]);\r\n                }\r\n                break;\r\n            case \"remove\":\r\n                this.removePlayer(myData.data);\r\n                break;\r\n            case \"initRoom\":\r\n                //set coundown time\r\n                this.countDown = myData.data[1];\r\n                this.pointsLost = myData.data[2];\r\n                console.log(this.countDown);\r\n                //add players\r\n                for (var i in myData.data[0]) {\r\n                    this.createPlayer(myData.data[0][i]);\r\n                }\r\n                break;\r\n            case \"positions\":\r\n                for (var i in myData.data) {\r\n                    if (this.playerId != myData.data[i].id)\r\n                        this.updatePlayerPosition(myData.data[i]);\r\n                }\r\n                break;\r\n            case \"finish\":\r\n                if (this.playerId == myData.data[0].id) {\r\n                    this.node.getComponent(\"gameManager\").showWinners();\r\n                    this.node.getComponent(\"gameManager\").showCrowns(myData.data[2]);\r\n                }\r\n                this.node.getComponent(\"gameManager\").addWinner(myData.data[0], myData.data[1]);\r\n                break;\r\n            case \"time\":\r\n                // update the time on watch\r\n                this.updateTime(myData.data);\r\n                break;\r\n            case \"updateEnemy\":\r\n                if (myData.data[0] != this.playerId)\r\n                    this.updateEnemy(myData.data[0], myData.data[1], myData.data[2], myData.data[3]);\r\n                break;\r\n            case \"updateItem\":\r\n                this.updateItem(myData.data[0], myData.data[1], myData.data[2], myData.data[3]);\r\n                //this.enemies.getComponent(\"enemyScript\").chasePlayer(this.players[myData.data[0]]);\r\n                break;\r\n            case \"emoji\":\r\n                this.updateEmoji(myData.data[0], myData.data[1]);\r\n                break;\r\n            case \"start\":\r\n                this.startCountDown(myData.data);\r\n                \r\n                break;\r\n        }\r\n    },\r\n    joinServer() {\r\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n            this.ws = wx.connectSocket({\r\n                url: \"ws://\" + this.serverIp +\":\" + this.port\r\n            })\r\n\r\n            this.ws.onOpen(() => {\r\n                console.log(\"we are connected\");\r\n                this.sendWebsocketMessage(\"playerInfo\", this.playerId);\r\n            });\r\n\r\n            this.ws.onMessage(({ data }) => {\r\n                this.recieveMessage(data);\r\n            });\r\n            \r\n            this.ws.onError(() => {\r\n                console.log(\"error\");\r\n                this.connectionErrorUI.active = true;\r\n                cc.find(\"Canvas/UI/MOBILE\").active = false;\r\n            });\r\n\r\n            this.ws.onClose(() => {\r\n                // if didn't close on purpose, alert\r\n                if (!this.socketClosed) {\r\n                    this.connectionErrorUI.active = true;\r\n                    cc.find(\"Canvas/UI/MOBILE\").active = false;\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            this.ws = new WebSocket(\"ws://\" + this.serverIp  + \":\" + this.port);\r\n\r\n            this.ws.addEventListener(\"open\", () => {\r\n                console.log(\"we are connected\");\r\n                this.sendWebsocketMessage(\"playerInfo\", this.playerId);\r\n            });\r\n\r\n            this.ws.addEventListener(\"error\", () => {\r\n                console.log(\"error\");\r\n                this.connectionErrorUI.active = true;\r\n                cc.find(\"Canvas/UI/MOBILE\").active = false;\r\n            });\r\n\r\n            this.ws.addEventListener(\"close\", () => {\r\n                // if didn't close on purpose, alert\r\n                if (!this.socketClosed) {\r\n                    this.connectionErrorUI.active = true;\r\n                    cc.find(\"Canvas/mainCamera/UI/MOBILE\").active = false;\r\n                }\r\n                    \r\n            })\r\n\r\n            this.ws.addEventListener('message', ({ data }) => {\r\n                this.recieveMessage(data);   \r\n\r\n                \r\n\r\n                //if (myData.type == \"updatePlayerState\") {\r\n                //    //console.log(myData);\r\n\r\n                //    //console.log(myData.data[0] + \" \" + myData.data[1]);\r\n                //    if (myData.data[0] != this.playerId) {\r\n                //        this.updatePlayer(myData.data[0], myData.data[1]);\r\n                //    }\r\n                //}\r\n                //else if (myData.type == \"remove\") {\r\n                //    this.removePlayer(myData.data);\r\n                //}\r\n                //else if (myData.type == \"addPlayers\") {\r\n                //    for (var i in myData.data) {\r\n                //        this.createPlayer(myData.data[i]);\r\n                //    }\r\n\r\n                //}\r\n                //else if (myData.type == \"positions\") {\r\n                //    for (var i in myData.data) {\r\n                //        if (this.playerId != myData.data[i].id)\r\n                //            this.updatePlayerPosition(myData.data[i]);\r\n                //    }\r\n                //}\r\n                //else if (myData.type == \"finish\") {\r\n                //    if (this.playerId == myData.data[0].id) {\r\n                //        this.node.getComponent(\"gameManager\").showWinners();\r\n                //    }\r\n                //    this.node.getComponent(\"gameManager\").addWinner(myData.data[0], myData.data[1]);\r\n                //}\r\n                //else if (myData.type == \"time\") {\r\n                //    // update the time on watch\r\n                //    this.updateTime(myData.data);\r\n                //}\r\n\r\n            })\r\n        }\r\n        \r\n\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        //var info = require(\"lobby.js\");\r\n        //this.playerId = info.id;\r\n        //this.port = info.port;\r\n\r\n        this.pointsLost = 5;\r\n        let abp = cc.find(\"MANAGER\").getComponent(\"aboutPlayer\");\r\n        this.playerId = abp.playerId;\r\n        this.port = abp.room;\r\n        this.serverIp = abp.serverIp;\r\n        this.crowns = abp.crowns;\r\n        this.houseIndex = abp.houseIndex;\r\n\r\n        this.players = new Map();\r\n\r\n        this.joinServer();\r\n    },\r\n\r\n    start() {\r\n        \r\n    },\r\n\r\n    update(dt) {\r\n        if (this.myPlayer != null)\r\n            this.sendWebsocketMessage(\"position\", [this.myPlayer.x, this.myPlayer.y, roundNumber(this.myPlayer.scaleY,5), roundNumber(this.myPlayer.scaleX,5)]);\r\n\r\n    },\r\n});\r\n"]}