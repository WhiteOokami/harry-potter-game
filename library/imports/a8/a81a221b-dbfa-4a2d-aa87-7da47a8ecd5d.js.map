{"version":3,"sources":["assets\\code\\client.js"],"names":["payLoad","type","data","PlayerData","id","x","posX","posY","scaleY","scaleX","lives","name","status","key","roundNumber","rnum","rlength","newnumber","Math","round","pow","cc","Class","Component","properties","playerId","ws","players","playerPrefab","Prefab","myPlayer","port","startPlace","Node","timer","watch","myTime","enemies","won","countDown","items","shortOnTime","watchAnim","Animation","connectionErrorUI","socketClosed","potionPrefab","cakePrefab","gameStarted","startScreen","crowns","chestPrefab","serverIp","pointsLost","sendWebsocketMessage","message","active","sys","platform","WECHAT_GAME","send","JSON","stringify","sendPlayerState","state","sendEnemyState","position","enemy","sendItemState","pos","scheduleOnce","sendEmoji","event","customEventData","node","getComponent","hideEmojis","createPlayer","player","instantiate","parent","find","y","getChildByName","Label","string","aPlayer","color","Color","WHITE","updatePlayer","thePlayer","moveRight","moveLeft","jump","stopX","stopY","updateEnemy","chasePlayer","updatePlayerPosition","setScale","removePlayer","destroy","updateTime","time","angle","getParent","play","wrapMode","WrapMode","Loop","stop","RED","timesUp","AudioSource","console","log","showCrowns","disconnect","os","closeSocket","close","updateItem","theItem","updateEmoji","playEmoji","startCountDown","num","recieveMessage","myData","parse","i","showWinners","addWinner","joinServer","wx","connectSocket","url","onOpen","onMessage","onError","onClose","WebSocket","addEventListener","onLoad","room","Map","start","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["class payLoad {\r\n    constructor(type, data) {\r\n        this.type = type;\r\n        this.data = data;\r\n    }\r\n};\r\n\r\nclass PlayerData {\r\n    constructor(id, x) {\r\n        this.id = id;\r\n        this.x = x;\r\n        this.status = 0;\r\n        this.key = '';\r\n    }\r\n    posX = 0;\r\n    posY = 0;\r\n    scaleY = 0;\r\n    scaleX = 0;\r\n    lives = 3;\r\n    name = null;\r\n};\r\n\r\nfunction roundNumber(rnum, rlength) {\r\n    var newnumber = Math.round(rnum * Math.pow(10, rlength)) / Math.pow(10, rlength);\r\n    return newnumber;\r\n}\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        playerId: 0,\r\n        ws: null,\r\n        players: null,\r\n        playerPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        myPlayer: null,\r\n        port: null,\r\n        startPlace: cc.Node,\r\n        timer: cc.Node,\r\n        watch: cc.Node,\r\n        myTime: 0,\r\n        enemies: cc.Node,\r\n        won: false,\r\n        countDown: null,\r\n        items: cc.Node,\r\n        shortOnTime: false,\r\n        watchAnim: cc.Animation,\r\n        connectionErrorUI: cc.Node,\r\n        socketClosed: false,\r\n        potionPrefab: cc.Prefab,\r\n        cakePrefab: cc.Prefab,\r\n        gameStarted: false,\r\n        startScreen: cc.Node,\r\n        crowns: 0,\r\n        chestPrefab: cc.Prefab,\r\n        serverIp: \"\",\r\n        pointsLost: 0,\r\n    },\r\n    sendWebsocketMessage(type, message) {\r\n        if (!this.connectionErrorUI.active) {\r\n            if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n                this.ws.send({ data: JSON.stringify(new payLoad(type, message)) });\r\n            } else {\r\n                this.ws.send(JSON.stringify(new payLoad(type, message)));\r\n            }\r\n        }\r\n        \r\n    },\r\n    sendPlayerState(state) {\r\n        this.sendWebsocketMessage(\"updatePlayerState\", [this.playerId, state]);\r\n    },\r\n    sendEnemyState(state, position, enemy) {\r\n        this.sendWebsocketMessage(\"updateEnemy\", [this.playerId, position, state, enemy]);\r\n    },\r\n    sendItemState(id, state, type, pos) {\r\n        // delay chest spawn\r\n        if (type == \"chest\" && state == \"spawn\") {\r\n            this.scheduleOnce(function () { this.sendWebsocketMessage(\"updateItem\", [id, state, type, pos]);},3);\r\n        } else {\r\n            this.sendWebsocketMessage(\"updateItem\", [id, state, type, pos]);\r\n        }\r\n        \r\n    },\r\n    sendEmoji: function (event, customEventData) {\r\n        // send emoji, customEventData will be the type\r\n        this.sendWebsocketMessage(\"emoji\", [this.playerId, customEventData]);\r\n        this.node.getComponent(\"gameManager\").hideEmojis();\r\n    },\r\n    createPlayer(player) {\r\n        //my character\r\n        if (player.id == this.playerId) {\r\n            this.myPlayer = cc.instantiate(this.playerPrefab);\r\n            this.myPlayer.parent = cc.find(\"Canvas/Players\");\r\n            this.myPlayer.x = this.startPlace.x;\r\n            this.myPlayer.y = this.startPlace.y;\r\n            this.myPlayer.name = player.id;\r\n            this.myPlayer.getChildByName(\"nameTag\").getComponent(cc.Label).string = player.name;\r\n            this.myPlayer.id = player.id;\r\n            this.players[player.id] = this.myPlayer;\r\n        } else {\r\n            let aPlayer = cc.instantiate(this.playerPrefab);\r\n            aPlayer.parent = cc.find(\"Canvas/Players\");\r\n            aPlayer.x = this.startPlace.x;\r\n            aPlayer.y = this.startPlace.y;\r\n            aPlayer.name = player.id;\r\n            aPlayer.id = player.id;\r\n            aPlayer.getChildByName(\"nameTag\").getComponent(cc.Label).string = player.name;\r\n            aPlayer.getChildByName(\"nameTag\").color = cc.Color.WHITE;\r\n            this.players[player.id] = aPlayer;\r\n        }\r\n    },\r\n    updatePlayer(playerId, state) {\r\n        let thePlayer = this.players[playerId];\r\n        switch (state) {\r\n            case \"right\":\r\n                thePlayer.getComponent(\"movement\").moveRight();\r\n                break;\r\n            case \"left\":\r\n                thePlayer.getComponent(\"movement\").moveLeft();\r\n                break;\r\n            case \"jump\":\r\n                thePlayer.getComponent(\"movement\").jump();\r\n                break;\r\n            case \"stopX\":\r\n                thePlayer.getComponent(\"movement\").stopX();\r\n                break;\r\n            case \"stopY\":\r\n                thePlayer.getComponent(\"movement\").stopY();\r\n                break;\r\n        }\r\n    },\r\n    updateEnemy(playerId, position,state, enemy) {\r\n        let thePlayer = this.players[playerId];\r\n        switch (state) {\r\n            case \"chaseNew\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").chasePlayer(thePlayer);\r\n                break;\r\n            case \"right\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").moveRight();\r\n                break;\r\n            case \"left\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").moveLeft();\r\n                break;\r\n            case \"jump\":\r\n                this.enemies.getChildByName(enemy).getComponent(\"enemyScript\").jump();\r\n                break;\r\n            case \"position\":\r\n                this.enemies.getChildByName(enemy).x = position[0];\r\n                this.enemies.getChildByName(enemy).y = position[1];\r\n                break;\r\n        //    case \"stopX\":\r\n        //        this.enemies.getComponent(\"movement\").stopX();\r\n        //        break;\r\n        //    case \"stopY\":\r\n        //        this.enemies.getComponent(\"movement\").stopY();\r\n        //        break;\r\n        }\r\n    },\r\n    \r\n    updatePlayerPosition(player) {\r\n        \r\n        this.players[player.id].x = player.posX;\r\n        this.players[player.id].y = player.posY;\r\n        this.players[player.id].setScale(player.scaleX, player.scaleY);\r\n        //console.log(player.id + \" \" + player.scaleY + \" \" + player.scaleX);\r\n    },\r\n    removePlayer(player) {\r\n        this.players[player.id].destroy();\r\n        this.players.delete(player.id);\r\n    },\r\n    updateTime(time) {\r\n        //change time on watch according to countdown time\r\n        if ((this.countDown - time) >= 0) {\r\n            this.timer.getComponent(cc.Label).string = time;\r\n            this.watch.angle = - ((time * 360) / this.countDown - 90);\r\n            this.myTime = time;\r\n            if (!this.shortOnTime && (this.countDown - time) < 15) {\r\n                this.watchAnim = this.watch.getParent().getComponent(cc.Animation).play(\"shortOnTime\");\r\n                this.watchAnim.wrapMode = cc.WrapMode.Loop;\r\n                this.shortOnTime = true;\r\n            }\r\n        }\r\n        else {\r\n            if (this.shortOnTime) {\r\n                this.watchAnim.stop(\"shortOnTime\");\r\n                this.watch.getParent().color = cc.Color.RED;\r\n                cc.find(\"system\").getComponent(\"gameManager\").timesUp();\r\n                this.shortOnTime = false;\r\n\r\n                //play lose sound & lose crowns\r\n                if (!this.won) {\r\n                    cc.find(\"system\").getChildByName(\"AUDIO\").getChildByName(\"LOSE\").getComponent(cc.AudioSource).play();\r\n                    console.log(this.crowns);\r\n                    if (this.crowns > 30)\r\n                        this.node.getComponent(\"gameManager\").showCrowns(this.pointsLost);\r\n                    else\r\n                        this.node.getComponent(\"gameManager\").showCrowns(0);\r\n                }\r\n                   \r\n            }\r\n                \r\n        }\r\n    },\r\n    disconnect() {\r\n        this.socketClosed = true;\r\n        if (cc.sys.os == cc.sys.WECHAT_GAME)\r\n            this.ws.closeSocket();\r\n        else\r\n            this.ws.close();\r\n    },\r\n    updateItem(id, state, type, pos) {\r\n        if (state == \"used\")\r\n            this.items.getChildByName(type + id).destroy();\r\n        else if (state == \"spawn\") {\r\n            let theItem = null;\r\n\r\n            if (type == \"potion\")\r\n                theItem = cc.instantiate(this.potionPrefab);\r\n            else if (type == \"cake\")\r\n                theItem = cc.instantiate(this.cakePrefab);\r\n            else if (type == \"chest\")\r\n                theItem = cc.instantiate(this.chestPrefab);\r\n\r\n            theItem.x = pos[0];\r\n            theItem.y = pos[1];\r\n            theItem.parent = this.items;\r\n            theItem.name = type + id;\r\n            theItem.getComponent(\"item\").id = id;\r\n            //console.log(id);\r\n        }\r\n            \r\n    },\r\n    updateEmoji(id, type) {\r\n        this.players[id].getComponent(\"movement\").playEmoji(type);\r\n    },\r\n    startCountDown(num) {\r\n        this.startScreen.active = true;\r\n        if (num == 0) {\r\n            this.startScreen.active = false;\r\n            this.gameStarted = true;\r\n        } else {\r\n            this.startScreen.getChildByName(\"NUM\").getComponent(cc.Label).string = num;\r\n        }\r\n    },\r\n    recieveMessage(data) {\r\n        let myData = JSON.parse(data);\r\n\r\n        switch (myData.type) {\r\n            case \"updatePlayerState\":\r\n                if (myData.data[0] != this.playerId) {\r\n                    this.updatePlayer(myData.data[0], myData.data[1]);\r\n                }\r\n                break;\r\n            case \"remove\":\r\n                this.removePlayer(myData.data);\r\n                break;\r\n            case \"initRoom\":\r\n                //set coundown time\r\n                this.countDown = myData.data[1];\r\n                this.pointsLost = myData.data[2];\r\n                console.log(this.countDown);\r\n                //add players\r\n                for (var i in myData.data[0]) {\r\n                    this.createPlayer(myData.data[0][i]);\r\n                }\r\n                break;\r\n            case \"positions\":\r\n                for (var i in myData.data) {\r\n                    if (this.playerId != myData.data[i].id)\r\n                        this.updatePlayerPosition(myData.data[i]);\r\n                }\r\n                break;\r\n            case \"finish\":\r\n                if (this.playerId == myData.data[0].id) {\r\n                    this.node.getComponent(\"gameManager\").showWinners();\r\n                    this.node.getComponent(\"gameManager\").showCrowns(myData.data[2]);\r\n                }\r\n                this.node.getComponent(\"gameManager\").addWinner(myData.data[0], myData.data[1]);\r\n                break;\r\n            case \"time\":\r\n                // update the time on watch\r\n                this.updateTime(myData.data);\r\n                break;\r\n            case \"updateEnemy\":\r\n                if (myData.data[0] != this.playerId)\r\n                    this.updateEnemy(myData.data[0], myData.data[1], myData.data[2], myData.data[3]);\r\n                break;\r\n            case \"updateItem\":\r\n                this.updateItem(myData.data[0], myData.data[1], myData.data[2], myData.data[3]);\r\n                //this.enemies.getComponent(\"enemyScript\").chasePlayer(this.players[myData.data[0]]);\r\n                break;\r\n            case \"emoji\":\r\n                this.updateEmoji(myData.data[0], myData.data[1]);\r\n                break;\r\n            case \"start\":\r\n                this.startCountDown(myData.data);\r\n                \r\n                break;\r\n        }\r\n    },\r\n    joinServer() {\r\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n            this.ws = wx.connectSocket({\r\n                url: \"ws://\" + this.serverIp +\":\" + this.port\r\n            })\r\n\r\n            this.ws.onOpen(() => {\r\n                console.log(\"we are connected\");\r\n                this.sendWebsocketMessage(\"playerInfo\", this.playerId);\r\n            });\r\n\r\n            this.ws.onMessage(({ data }) => {\r\n                this.recieveMessage(data);\r\n            });\r\n            \r\n            this.ws.onError(() => {\r\n                console.log(\"error\");\r\n                this.connectionErrorUI.active = true;\r\n                cc.find(\"Canvas/UI/MOBILE\").active = false;\r\n            });\r\n\r\n            this.ws.onClose(() => {\r\n                // if didn't close on purpose, alert\r\n                if (!this.socketClosed) {\r\n                    this.connectionErrorUI.active = true;\r\n                    cc.find(\"Canvas/UI/MOBILE\").active = false;\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            this.ws = new WebSocket(\"ws://\" + this.serverIp  + \":\" + this.port);\r\n\r\n            this.ws.addEventListener(\"open\", () => {\r\n                console.log(\"we are connected\");\r\n                this.sendWebsocketMessage(\"playerInfo\", this.playerId);\r\n            });\r\n\r\n            this.ws.addEventListener(\"error\", () => {\r\n                console.log(\"error\");\r\n                this.connectionErrorUI.active = true;\r\n                cc.find(\"Canvas/UI/MOBILE\").active = false;\r\n            });\r\n\r\n            this.ws.addEventListener(\"close\", () => {\r\n                // if didn't close on purpose, alert\r\n                if (!this.socketClosed) {\r\n                    this.connectionErrorUI.active = true;\r\n                    cc.find(\"Canvas/UI/MOBILE\").active = false;\r\n                }\r\n                    \r\n            })\r\n\r\n            this.ws.addEventListener('message', ({ data }) => {\r\n                this.recieveMessage(data);   \r\n\r\n                \r\n\r\n                //if (myData.type == \"updatePlayerState\") {\r\n                //    //console.log(myData);\r\n\r\n                //    //console.log(myData.data[0] + \" \" + myData.data[1]);\r\n                //    if (myData.data[0] != this.playerId) {\r\n                //        this.updatePlayer(myData.data[0], myData.data[1]);\r\n                //    }\r\n                //}\r\n                //else if (myData.type == \"remove\") {\r\n                //    this.removePlayer(myData.data);\r\n                //}\r\n                //else if (myData.type == \"addPlayers\") {\r\n                //    for (var i in myData.data) {\r\n                //        this.createPlayer(myData.data[i]);\r\n                //    }\r\n\r\n                //}\r\n                //else if (myData.type == \"positions\") {\r\n                //    for (var i in myData.data) {\r\n                //        if (this.playerId != myData.data[i].id)\r\n                //            this.updatePlayerPosition(myData.data[i]);\r\n                //    }\r\n                //}\r\n                //else if (myData.type == \"finish\") {\r\n                //    if (this.playerId == myData.data[0].id) {\r\n                //        this.node.getComponent(\"gameManager\").showWinners();\r\n                //    }\r\n                //    this.node.getComponent(\"gameManager\").addWinner(myData.data[0], myData.data[1]);\r\n                //}\r\n                //else if (myData.type == \"time\") {\r\n                //    // update the time on watch\r\n                //    this.updateTime(myData.data);\r\n                //}\r\n\r\n            })\r\n        }\r\n        \r\n\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        //var info = require(\"lobby.js\");\r\n        //this.playerId = info.id;\r\n        //this.port = info.port;\r\n\r\n        this.pointsLost = 5;\r\n        this.playerId = cc.find(\"MANAGER\").getComponent(\"aboutPlayer\").playerId;\r\n        this.port = cc.find(\"MANAGER\").getComponent(\"aboutPlayer\").room;\r\n        this.serverIp = cc.find(\"MANAGER\").getComponent(\"aboutPlayer\").serverIp;\r\n        this.crowns = cc.find(\"MANAGER\").getComponent(\"aboutPlayer\").crowns;\r\n\r\n        this.players = new Map();\r\n\r\n        this.joinServer();\r\n    },\r\n\r\n    start() {\r\n        \r\n    },\r\n\r\n    update(dt) {\r\n        if (this.myPlayer != null)\r\n            this.sendWebsocketMessage(\"position\", [this.myPlayer.x, this.myPlayer.y, roundNumber(this.myPlayer.scaleY,5), roundNumber(this.myPlayer.scaleX,5)]);\r\n\r\n    },\r\n});\r\n"]}